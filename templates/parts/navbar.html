{% load static %}
{% load i18n %}

{% if LANGUAGE_CODE == 'ar' %}
<!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ (AR) -->
<div class="container-fluid p-0" style="position: sticky; top: 0; z-index: 100;" dir="rtl">
  <nav class="navbar navbar-expand-lg bg-dark navbar-dark py-2 px-lg-5">

    <!-- Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapseAR">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapseAR">
      
      <!-- Ø§Ù„Ø±ÙˆØ§Ø¨Ø· -->
      <div class="navbar-nav ml-auto py-0">
            <!-- Dark Mode Toggle -->
        <button id="darkModeToggle" class="dark-mode-btn">ğŸŒ™</button>

        <a href="{% url 'main_core:home' %}" class="nav-item nav-link active">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        
        {# Ø£ÙˆÙ„ 4 ØªØµÙ†ÙŠÙØ§Øª ÙÙ‚Ø· Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ #}
        {% for NewsCategory in categories|slice:":4" %}
          <a href="{% url 'main_core:category_list' NewsCategory.slug %}" 
             class="nav-item nav-link">{% trans NewsCategory.name %}</a>
        {% endfor %}

        {# Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª ÙÙŠ Ù…Ù†ÙŠÙˆ Ù…Ù†Ø³Ø¯Ù„Ø© #}
        {% if categories|length > 4 %}
        <div class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Ø§Ù„Ù…Ø²ÙŠØ¯</a>
          <div class="dropdown-menu bg-dark border-0">
            {% for NewsCategory in categories|slice:"4:" %}
              <a href="{% url 'main_core:category_list' NewsCategory.slug %}" 
                 class="dropdown-item text-light">{% trans NewsCategory.name %}</a>
            {% endfor %}
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Ø§Ù„Ø¨Ø­Ø« -->
      <div class="input-group mr-auto mt-2 mt-lg-0 d-lg-flex" style="max-width: 300px;">
        <form class="d-flex w-100" role="search" method="get" action="{% url 'main_core:search_articles' %}">
          <input class="form-control" type="search" name="q" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¨Ø±..." aria-label="Search">
          <button class="input-group-text bg-primary text-dark border-0 px-3" type="submit">
            <i class="fa fa-search"></i>
          </button>
        </form>
      </div>

    </div>
  </nav>
</div>
<!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ù†Ù‡Ø§ÙŠØ© -->

{% else %}
<!-- Navbar (EN) -->
<div class="container-fluid p-0" style="position: sticky; top: 0; z-index: 100;" dir="ltr">
  <nav class="navbar navbar-expand-lg bg-dark navbar-dark py-2 px-lg-5">

    <!-- Mobile Toggle -->
    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapseEN">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapseEN">

      <!-- Links -->
      <div class="navbar-nav py-0">
        <a href="{% url 'main_core:home' %}" class="nav-item nav-link active">Home</a>
        
        {# First 4 categories only for mobile #}
        {% for NewsCategory in categories|slice:":4" %}
          <a href="{% url 'main_core:category_list' NewsCategory.slug %}" 
             class="nav-item nav-link">{% trans NewsCategory.name %}</a>
        {% endfor %}

        {# Rest go inside dropdown #}
        {% if categories|length > 4 %}
        <div class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">More</a>
          <div class="dropdown-menu bg-dark border-0">
            {% for NewsCategory in categories|slice:"4:" %}
              <a href="{% url 'main_core:category_list' NewsCategory.slug %}" 
                 class="dropdown-item text-light">{% trans NewsCategory.name %}</a>
            {% endfor %}
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Search -->
      <div class="input-group ml-auto mt-2 mt-lg-0 d-lg-flex" style="max-width: 300px;">
        <form class="d-flex w-100" role="search" method="get" action="{% url 'main_core:search_articles' %}">
          <input class="form-control" type="search" name="q" placeholder="Search for news..." aria-label="Search">
          <button class="input-group-text bg-primary text-dark border-0 px-3" type="submit">
            <i class="fa fa-search"></i>
          </button>
        </form>
      </div>

    </div>
  </nav>
</div>
<!-- Navbar End -->
{% endif %}